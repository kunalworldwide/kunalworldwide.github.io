<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-03-07">
<meta name="description" content="Learn how to effectively estimate and manage infrastructure costs using tools like Infracost">

<title>Cost Estimation for Infrastructure: A Complete Guide – Kunal Das</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../assets/icon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-0626ff4d7a71b55c8707dcae1d04a9b6.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-e25cc82807363e79c52e96bc8b7855f1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-a026687e09d98f8d2961ec3d2fb70020.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-800d7d3762e3487e31411f8377f5e9f7.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-X8X02516LE"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-X8X02516LE', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Kunal Das</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../posts.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../talks.html"> 
<span class="menu-text">Talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../contact.html"> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/kunald_official"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/kunalworldwide"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/kunaldaskd"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#design-goals" id="toc-design-goals" class="nav-link active" data-scroll-target="#design-goals">1. Design Goals</a></li>
  <li><a href="#cost-estimation" id="toc-cost-estimation" class="nav-link" data-scroll-target="#cost-estimation">1.1. Cost estimation</a></li>
  <li><a href="#options-available" id="toc-options-available" class="nav-link" data-scroll-target="#options-available">1.2. Options available</a></li>
  <li><a href="#available-tools" id="toc-available-tools" class="nav-link" data-scroll-target="#available-tools">1.3. Available tools</a></li>
  <li><a href="#infracost" id="toc-infracost" class="nav-link" data-scroll-target="#infracost">2. Infracost</a></li>
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">2.1. Overview</a></li>
  <li><a href="#advantages" id="toc-advantages" class="nav-link" data-scroll-target="#advantages">2.2. Advantages</a></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations">2.3 Limitations</a></li>
  <li><a href="#use-cases" id="toc-use-cases" class="nav-link" data-scroll-target="#use-cases">2.4 Use cases</a></li>
  <li><a href="#impact-analysis" id="toc-impact-analysis" class="nav-link" data-scroll-target="#impact-analysis">2.5 Impact analysis</a></li>
  <li><a href="#workflow" id="toc-workflow" class="nav-link" data-scroll-target="#workflow">3. Workflow</a></li>
  <li><a href="#basic-workflow" id="toc-basic-workflow" class="nav-link" data-scroll-target="#basic-workflow">3.1 Basic workflow</a></li>
  <li><a href="#devops-workflow" id="toc-devops-workflow" class="nav-link" data-scroll-target="#devops-workflow">3.2 DevOps workflow</a></li>
  <li><a href="#azure-devops" id="toc-azure-devops" class="nav-link" data-scroll-target="#azure-devops">3.2.1 Azure DevOps</a></li>
  <li><a href="#jenkins" id="toc-jenkins" class="nav-link" data-scroll-target="#jenkins">3.2.2 Jenkins</a></li>
  <li><a href="#implementation" id="toc-implementation" class="nav-link" data-scroll-target="#implementation">1. Implementation</a></li>
  <li><a href="#steps-for-azure-devops" id="toc-steps-for-azure-devops" class="nav-link" data-scroll-target="#steps-for-azure-devops">4.1 Steps for Azure DevOps</a></li>
  <li><a href="#installing-extension" id="toc-installing-extension" class="nav-link" data-scroll-target="#installing-extension">4.1.1 Installing extension</a></li>
  <li><a href="#making-the-repo-ready" id="toc-making-the-repo-ready" class="nav-link" data-scroll-target="#making-the-repo-ready">4.1.2 Making the repo ready</a></li>
  <li><a href="#adding-infracost-code-in-pipeline" id="toc-adding-infracost-code-in-pipeline" class="nav-link" data-scroll-target="#adding-infracost-code-in-pipeline">4.1.3 Adding Infracost code in pipeline</a></li>
  <li><a href="#additional-settings" id="toc-additional-settings" class="nav-link" data-scroll-target="#additional-settings">4.1.1 Additional settings</a></li>
  <li><a href="#creating-a-pull-request" id="toc-creating-a-pull-request" class="nav-link" data-scroll-target="#creating-a-pull-request">4.1.2 Creating a Pull Request</a></li>
  <li><a href="#viewing-the-dashboard" id="toc-viewing-the-dashboard" class="nav-link" data-scroll-target="#viewing-the-dashboard">4.1.3 Viewing the dashboard</a></li>
  <li><a href="#dashboard-use-cases" id="toc-dashboard-use-cases" class="nav-link" data-scroll-target="#dashboard-use-cases">4.1.1 Dashboard use cases</a></li>
  <li><a href="#navigation" id="toc-navigation" class="nav-link" data-scroll-target="#navigation">1. Navigation</a></li>
  <li><a href="#pr-cost-difference" id="toc-pr-cost-difference" class="nav-link" data-scroll-target="#pr-cost-difference">5.1 PR cost difference</a></li>
  <li><a href="#detailed-cost-estimation" id="toc-detailed-cost-estimation" class="nav-link" data-scroll-target="#detailed-cost-estimation">5.1 Detailed Cost estimation</a></li>
  <li><a href="#diagram" id="toc-diagram" class="nav-link" data-scroll-target="#diagram">6. Diagram</a></li>
  <li><a href="#new-branch" id="toc-new-branch" class="nav-link" data-scroll-target="#new-branch">6.1 New Branch</a></li>
  <li><a href="#making-changes" id="toc-making-changes" class="nav-link" data-scroll-target="#making-changes">6.2 Making changes</a></li>
  <li><a href="#pull-request" id="toc-pull-request" class="nav-link" data-scroll-target="#pull-request">6.3 Pull Request</a></li>
  <li><a href="#release" id="toc-release" class="nav-link" data-scroll-target="#release">6.4 Release</a></li>
  <li><a href="#scope-for-improvement" id="toc-scope-for-improvement" class="nav-link" data-scroll-target="#scope-for-improvement">1. Scope for improvement</a></li>
  <li><a href="#cost-of-implementation" id="toc-cost-of-implementation" class="nav-link" data-scroll-target="#cost-of-implementation">2. Cost of Implementation</a></li>
  <li><a href="#read-my-blogs" id="toc-read-my-blogs" class="nav-link" data-scroll-target="#read-my-blogs">Read my blogs:</a></li>
  <li><a href="#connect-with-me" id="toc-connect-with-me" class="nav-link" data-scroll-target="#connect-with-me">Connect with Me:</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cost Estimation for Infrastructure: A Complete Guide</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Infrastructure</div>
    <div class="quarto-category">Cost Management</div>
    <div class="quarto-category">DevOps</div>
    <div class="quarto-category">Cloud</div>
  </div>
  </div>

<div>
  <div class="description">
    Learn how to effectively estimate and manage infrastructure costs using tools like Infracost
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 7, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://miro.medium.com/v2/resize:fill:44:44/1*kfaefcgQPHrPsNobjuiiSg.jpeg" class="img-fluid figure-img"></p>
<figcaption>Kunal Das, Author</figcaption>
</figure>
</div>
<ul>
<li><a href="#cost-estimation-for-infrastructure">COST ESTIMATION FOR INFRASTRUCTURE</a>
<ul>
<li><a href="#1-design-goals">1. Design Goals</a></li>
<li><a href="#11-cost-estimation">1.1. Cost estimation</a></li>
<li><a href="#12-options-available">1.2. Options available</a></li>
<li><a href="#13-available-tools">1.3. Available tools</a></li>
<li><a href="#2-infracost">2. Infracost</a></li>
<li><a href="#21-overview">2.1. Overview</a></li>
<li><a href="#22-advantages">2.2. Advantages</a></li>
<li><a href="#23-limitations">2.3 Limitations</a></li>
<li><a href="#24-use-cases">2.4 Use cases</a></li>
<li><a href="#25-impact-analysis">2.5 Impact analysis</a></li>
<li><a href="#3-workflow">3. Workflow</a></li>
<li><a href="#31-basic-workflow">3.1 Basic workflow</a></li>
<li><a href="#32-devops-workflow">3.2 DevOps workflow</a></li>
<li><a href="#321-azure-devops">3.2.1 Azure DevOps</a></li>
<li><a href="#322-jenkins">3.2.2 Jenkins</a></li>
<li><a href="#1-implementation">1. Implementation</a></li>
<li><a href="#41-steps-for-azure-devops">4.1 Steps for Azure DevOps</a></li>
<li><a href="#411-installing-extension">4.1.1 Installing extension</a></li>
<li><a href="#412-making-the-repo-ready">4.1.2 Making the repo ready</a></li>
<li><a href="#413-adding-infracost-code-in-pipeline">4.1.3 Adding Infracost code in pipeline</a></li>
<li><a href="#411-additional-settings">4.1.1 Additional settings</a></li>
<li><a href="#412-creating-a-pull-request">4.1.2 Creating a Pull Request</a></li>
<li><a href="#413-viewing-the-dashboard">4.1.3 Viewing the dashboard</a></li>
<li><a href="#411-dashboard-use-cases">4.1.1 Dashboard use cases</a></li>
<li><a href="#1-navigation">1. Navigation</a></li>
<li><a href="#51-pr-cost-difference">5.1 PR cost difference</a></li>
<li><a href="#51-detailed-cost-estimation">5.1 Detailed Cost estimation</a></li>
<li><a href="#6-diagram">6. Diagram</a></li>
<li><a href="#61-new-branch">6.1 New Branch</a></li>
<li><a href="#62-making-changes">6.2 Making changes</a></li>
<li><a href="#63-pull-request">6.3 Pull Request</a></li>
<li><a href="#64-release">6.4 Release</a></li>
<li><a href="#1-scope-for-improvement">1. Scope for improvement</a></li>
<li><a href="#2-cost-of-implementation">2. Cost of Implementation</a></li>
</ul></li>
</ul>
<section id="design-goals" class="level2">
<h2 class="anchored" data-anchor-id="design-goals">1. Design Goals</h2>
</section>
<section id="cost-estimation" class="level2">
<h2 class="anchored" data-anchor-id="cost-estimation">1.1. Cost estimation</h2>
<p>Cost estimation is the process of predicting the cost of a project, product, or service. It involves identifying all the resources that will be needed and determining the associated costs to arrive at a total estimate. Cost estimation is a key part of project management and helps stakeholders understand the financial implications of their decisions. It can also help organizations make informed decisions about whether to pursue a project or service and how to allocate budgets for the best return on investment. There are many factors that can affect the cost of a project, including the complexity of the work, the skills and expertise of the team, and the availability of resources.</p>
</section>
<section id="options-available" class="level2">
<h2 class="anchored" data-anchor-id="options-available">1.2. Options available</h2>
<p>There are several options for cost estimation in the cloud:</p>
<p>Cost calculators: Most cloud providers offer cost calculators that allow you to estimate the cost of various cloud resources based on your usage patterns and requirements. These calculators can help you compare the cost of different options and choose the most cost-effective solution.</p>
<p>Cost optimization tools: Many cloud providers offer tools and services to help organizations optimize their resource usage and costs. These tools can help identify cost drivers, forecast future costs, and recommend optimization strategies.</p>
<p>Pricing plans: Many cloud providers offer a variety of pricing plans that offer different levels of resources and support at different price points. Carefully reviewing and comparing these plans can help you choose the one that best meets your needs and budget.</p>
<p>Cost monitoring and management tools: There are a variety of tools and services available that can help you monitor your cloud resource usage and costs in real-time. These tools can alert you to unexpected cost spikes and help you identify opportunities for cost optimization.</p>
<p>Negotiating with vendors: Some cloud providers may be willing to negotiate pricing or offer discounts for large or long-term commitments. It may be worth negotiating with your provider to see if you can get a better deal on your cloud resources.</p>
<p>Resource optimization: Identifying and eliminating unnecessary or underutilized resources can help reduce your overall cloud costs. This could include retiring or decommissioning old resources, optimizing resource allocation, and consolidating resources where possible.</p>
</section>
<section id="available-tools" class="level2">
<h2 class="anchored" data-anchor-id="available-tools">1.3. Available tools</h2>
<p>There are several tools available for cost estimation:</p>
<p>Cost calculators: Many cloud providers offer cost calculators that allow you to estimate the cost of various cloud resources based on your usage patterns and requirements. These calculators can help you compare the cost of different options and choose the most cost-effective solution. E.g. Total Cost of Ownership (TCO) Calculator in AWS, The Azure Pricing Calculator, Google Cloud Pricing Calculator</p>
<p>Cost monitoring and management tools: There are a variety of tools and services available that can help you monitor your cloud resource usage and costs in real-time. These tools can alert you to unexpected cost spikes and help you identify opportunities for cost optimization.</p>
<p>Project management software: Many project management software platforms offer cost estimation and budgeting tools to help organizations plan and track project costs.</p>
<p>Specialized cost estimation software: There are also specialized cost estimation software tools that are specifically designed for cost estimation. These tools often offer advanced features and capabilities, such as the ability to create detailed cost breakdowns and incorporate risk analysis.</p>
<p>Infracost: Infracost is a tool that helps users optimize their costs when using Terraform for infrastructure management. It provides real-time cost estimates for infrastructure resources and suggests ways to reduce costs through optimization.</p>
<p>Teracost: TeraCost is a cloud cost management and optimization platform that helps organizations optimize their cloud costs by providing visibility into resource usage and costs, identifying opportunities for optimization, and recommending actions to reduce costs. It offers a range of features, including cost forecasting, budget tracking, and resource optimization recommendations, and is designed to work with a variety of cloud providers, including Amazon Web Services (AWS), Microsoft Azure, and Google Cloud Platform (GCP).</p>
</section>
<section id="infracost" class="level2">
<h2 class="anchored" data-anchor-id="infracost">2. Infracost</h2>
</section>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">2.1. Overview</h2>
<p>Infracost is a tool that is specifically designed to optimize costs in Terraform environments. It works by analysing the resources that are being created in a Terraform configuration and providing recommendations for cost optimization. This can include suggestions for using lower cost resource types, resizing resources to a more cost-effective size, or identifying resources that are no longer needed and can be safely deleted. Infracost also provides real-time cost estimates for the resources in a Terraform configuration, which can help teams make more informed decisions about the cost of their infrastructure. Overall, Infracost is a powerful tool that can help teams save money on their infrastructure costs by identifying opportunities for cost optimization and providing actionable recommendations for implementing those optimizations.</p>
</section>
<section id="advantages" class="level2">
<h2 class="anchored" data-anchor-id="advantages">2.2. Advantages</h2>
<p>Infracost is a tool that can be used for cost optimization in Terraform, a popular Infrastructure as Code (IaC) tool. It provides several advantages over other cost optimization tools available for Terraform:</p>
<p>Real-time cost estimation: Infracost provides real-time cost estimates for all the resources in your Terraform code, so you can make informed decisions about your infrastructure costs.</p>
<p>Integration with Terraform: Infracost integrates seamlessly with Terraform, so you can see the cost estimates for your infrastructure as you write your code. This helps you avoid costly mistakes and optimize your infrastructure costs from the start.</p>
<p>Custom pricing: Infracost allows you to set custom pricing for your resources, so you can better reflect your organization’s negotiated rates or your unique usage patterns.</p>
<p>Resource filtering: Infracost allows you to filter resources by tag, type, and name, making it easier to focus on specific resources and optimize their costs.</p>
<p>Resource grouping: Infracost groups similar resources together, making it easier to compare costs and identify opportunities for optimization.</p>
<p>Easy to use: Infracost is easy to use and requires minimal setup, so you can start optimizing your infrastructure costs quickly and easily.</p>
<p>Overall, Infracost provides a comprehensive and user-friendly solution for cost optimization in Terraform, making it an excellent choice for organizations looking to optimize their infrastructure costs.</p>
</section>
<section id="limitations" class="level2">
<h2 class="anchored" data-anchor-id="limitations">2.3 Limitations</h2>
<p>Infracost is a useful tool for gaining visibility into the cost of your infrastructure and optimizing your spend on cloud resources. However, it does have some limitations to consider:</p>
<p>Limited to supported cloud providers: Infracost currently supports only a limited number of cloud providers, including AWS, Azure, and Google Cloud. If you are using a different cloud provider or a combination of multiple providers, Infracost may not be able to provide cost estimates for your infrastructure.</p>
<p>Dependent on accurate resource pricing: Infracost relies on accurate resource pricing information from the supported cloud providers. If the pricing information is incorrect or out of date, Infracost cost estimates may not be accurate.</p>
<p>Limited to resources supported by the cloud providers: Infracost can only provide cost estimates for resources that are supported by the cloud providers it integrates with. If you are using custom resources or resources from third-party providers, Infracost may not be able to provide cost estimates for them.</p>
<p>Requires manual integration with infrastructure as code: While Infracost integrates with popular infrastructure as code tools such as Terraform and CloudFormation, it requires manual integration. This means you will need to set up Infracost and configure it to work with your infrastructure as code tools, which can be time-consuming and require some technical expertise.</p>
<p>Limited to infrastructure costs: Infracost only provides estimates for the cost of your infrastructure resources, such as compute instances and storage. It does not include other costs such as data transfer fees or licensing costs for third-party software.</p>
<p>Limited to current infrastructure: Infracost only provides cost estimates for your current infrastructure. It does not allow you to compare the cost of different infrastructure configurations or predict the cost of future infrastructure changes.</p>
<p>Overall, while Infracost is a useful tool for gaining visibility into the cost of your infrastructure and optimizing your spend on cloud resources, it is limited in its scope and may not be suitable for all organizations or infrastructure configurations.</p>
</section>
<section id="use-cases" class="level2">
<h2 class="anchored" data-anchor-id="use-cases">2.4 Use cases</h2>
<p>Some possible use cases for Infracost include:</p>
<p>Identifying and reducing over-provisioned resources: Infracost can help you identify resources that are over-provisioned, which means they have more capacity than is necessary to meet your workload demands. By reducing the capacity of these resources, you can save on your cloud costs.</p>
<p>Optimizing resource usage: Infracost can help you optimize resource usage by identifying underutilized resources and suggesting ways to improve their utilization. For example, if you have a virtual machine that is only running at 20% capacity, Infracost may suggest moving workloads to that machine to better utilize its capacity.</p>
<p>Estimating costs for infrastructure changes: Infracost can be used to estimate the costs of making changes to your infrastructure, such as adding or removing resources. This can help you plan for changes and ensure that they are cost-effective.</p>
<p>Analysing cloud cost trends: Infracost can provide detailed cost breakdowns and graphs that allow you to understand your cloud costs over time and identify trends that may impact your budget. This can help you plan and make decisions to optimize your costs.</p>
<p>Auditing and compliance: Infracost can be used to audit your infrastructure and ensure that it complies with company policies or regulatory requirements. It can also help you identify resources that may be overpriced or misconfigured, allowing you to take corrective action.</p>
</section>
<section id="impact-analysis" class="level2">
<h2 class="anchored" data-anchor-id="impact-analysis">2.5 Impact analysis</h2>
<p>Infracost is a tool that allows users to perform cost analysis on their infrastructure-as-code (IaC) resources. This means that users can see the estimated cost of their resources before they are deployed, allowing them to make informed decisions about their infrastructure and optimize for cost. One key use case for Infracost is in the development phase, where users can use it to identify and address potential cost issues before they become a problem. It can also be used in the operations phase to monitor the ongoing cost of infrastructure and identify opportunities for optimization. By providing visibility into the cost of infrastructure, Infracost can help organizations make informed decisions about how to allocate their resources and stay within budget. Overall, the use of Infracost can have a significant impact on the cost efficiency of an organization’s infrastructure, helping to reduce waste and ensure that resources are being used effectively.</p>
</section>
<section id="workflow" class="level2">
<h2 class="anchored" data-anchor-id="workflow">3. Workflow</h2>
</section>
<section id="basic-workflow" class="level2">
<h2 class="anchored" data-anchor-id="basic-workflow">3.1 Basic workflow</h2>
<p>The workflow of infracost involves the following steps:</p>
<p>Install the infracost CLI tool: Infracost can be installed as a standalone CLI tool or as a Terraform plugin. To install the CLI tool, you can use the following command:</p>
<p>curl -sfL <a href="https://raw.githubusercontent.com/infracost/infracost/stable/scripts/install.sh">https://raw.githubusercontent.com/infracost/infracost/stable/scripts/install.sh</a> | sh</p>
<p>Initialize infracost: Once you have installed the infracost CLI tool, you can initialize it by running the following command in your Terraform directory:</p>
<p>infracost init</p>
<p>This will create a default configuration file (infracost.yml) in your Terraform directory, which you can customize as per your needs.</p>
<p>Add infracost to your Terraform workflow: You can add infracost to your Terraform workflow by using the infracost command before or after running terraform plan or terraform apply. For example, you can run the following command to generate a cost estimate before applying your changes:</p>
<p>infracost plan</p>
<p>Alternatively, you can run the following command to generate a cost estimate after applying your changes:</p>
<p>infracost apply</p>
<p>Review the cost estimate: Infracost will generate a cost estimate in the form of a table, which will show you the estimated cost of each resource in your Terraform configuration. You can review the cost estimate and make any necessary changes to your configuration to optimize costs.</p>
<p>Repeat the process: You can repeat the process of running infracost before or after applying your changes as many times as you like, until you are satisfied with the cost estimate.</p>
<p>Use infracost with version control: You can also use infracost with version control systems like Git to track changes to your cost estimates over time. This can be useful for comparing the costs of different versions of your Terraform configuration and for identifying cost-saving opportunities.</p>
<p>Use infracost with CI/CD: You can also integrate infracost with your CI/CD pipeline to automate the process of generating and reviewing cost estimates. This can be especially useful if you have a large number of Terraform configurations that need to be regularly reviewed for cost optimization.</p>
</section>
<section id="devops-workflow" class="level2">
<h2 class="anchored" data-anchor-id="devops-workflow">3.2 DevOps workflow</h2>
</section>
<section id="azure-devops" class="level2">
<h2 class="anchored" data-anchor-id="azure-devops">3.2.1 Azure DevOps</h2>
<p>The workflow for using infracost with Azure DevOps involves integrating infracost into your Azure DevOps pipeline. This can be done by adding the infracost task to your pipeline and configuring it to run at the appropriate stage.</p>
<p>To begin, you will need to install the infracost extension from the Azure DevOps marketplace. Next, you will need to create a pipeline and add the infracost task to it. In the task configuration, you will need to specify the path to your Terraform configuration files, as well as any additional arguments that you want to pass to infracost.</p>
<p>Once the task is configured, you can run your pipeline as usual. As part of the pipeline execution, infracost will analyze your Terraform configuration and provide cost estimates for the resources that are being created. This information will be displayed in the pipeline output, allowing you to easily see the cost implications of your changes.</p>
<p>In addition to running infracost as part of your pipeline, you can also use it to create pull request checks. This allows you to enforce cost limits on pull requests, ensuring that any changes that are made do not exceed a certain budget.</p>
<p>Overall, integrating infracost into your Azure DevOps workflow can help you better understand the cost implications of your infrastructure changes, and ensure that you are making cost-effective decisions as you develop and deploy your applications.</p>
</section>
<section id="jenkins" class="level2">
<h2 class="anchored" data-anchor-id="jenkins">3.2.2 Jenkins</h2>
<p>The workflow for using infracost with Jenkins typically involves the following steps:</p>
<p>Install the infracost plugin in Jenkins. This can be done through the Jenkins Plugin Manager.</p>
<p>Configure the infracost plugin in the Jenkins Global Configuration page. This includes specifying the AWS access keys, the Terraform version, and the desired frequency for cost scans.</p>
<p>In your Jenkins job, add a build step to run infracost. This can be done by selecting “Infracost” from the Add Build Step dropdown menu.</p>
<p>In the infracost build step, specify the path to your Terraform configuration files and any additional command line options.</p>
<p>Run the Jenkins job to trigger the infracost scan. The infracost plugin will scan your Terraform configuration files and generate a report on the estimated cost of your infrastructure.</p>
<p>View the infracost report in the Jenkins build output. The report will contain a breakdown of the cost estimates for each resource, as well as a total estimate for the entire infrastructure.</p>
<p>Optionally, you can configure infracost to fail the Jenkins build if the estimated cost exceeds a certain threshold. This can help prevent overspending on infrastructure costs.</p>
<p>By integrating infracost into your Jenkins workflow, you can easily track the cost of your infrastructure and make informed decisions about resource allocation and optimization.</p>
<p>Apart from all Infracost supports multiple CI/CD platforms shown below,</p>
<p><img src="https://miro.medium.com/v2/resize:fit:700/1*YE7MA6bv8msUvs771jnRAA.png" class="img-fluid"></p>
</section>
<section id="implementation" class="level2">
<h2 class="anchored" data-anchor-id="implementation">1. Implementation</h2>
</section>
<section id="steps-for-azure-devops" class="level2">
<h2 class="anchored" data-anchor-id="steps-for-azure-devops">4.1 Steps for Azure DevOps</h2>
</section>
<section id="installing-extension" class="level2">
<h2 class="anchored" data-anchor-id="installing-extension">4.1.1 Installing extension</h2>
<p>Go to your organization setting page in Azure Devops</p>
<p><a href="https://dev.azure.com/%7Borg_name%7D/_settings/extensions?tab=installed">https://dev.azure.com/{org_name}/_settings/extensions?tab=installed</a></p>
<p>Go to the marketplace link and install Infracost extension</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=Infracost.infracost-tasks">https://marketplace.visualstudio.com/items?itemName=Infracost.infracost-tasks</a></p>
<p>Go to the Infracost Dashboard URL and login with your account</p>
<p><a href="https://dashboard.infracost.io/">https://dashboard.infracost.io/</a></p>
</section>
<section id="making-the-repo-ready" class="level2">
<h2 class="anchored" data-anchor-id="making-the-repo-ready">4.1.2 Making the repo ready</h2>
<p>Upon login go to organization settings and copy the API and keep it in safe place for later use</p>
<p>If you do not already have a Terraform file, create one or coy from my repo,</p>
<p><a href="https://github.com/Kunaldastiger/Terraform-Sample/blob/main/Virtual-machines/MicrosoftWindowsServer.tf">https://github.com/Kunaldastiger/Terraform-Sample/blob/main/Virtual-machines/MicrosoftWindowsServer.tf</a></p>
<p>Apart from this you must have a pipeline yaml file or a pipeline created in classic fashion,<br>
code for the same can be found here,</p>
<p><a href="https://github.com/Kunaldastiger/Terraform-Sample/blob/main/azure-deployment.yaml">https://github.com/Kunaldastiger/Terraform-Sample/blob/main/azure-deployment.yaml</a></p>
<p>Now run the pipeline and check if resource is getting created or not, needless to say, you also need to have a service connection to azure.</p>
<p>If you do not have a service connection kindly follow below steps,</p>
<p>Sign in to Azure DevOps and navigate to the Project Settings page.</p>
<p>In the left menu, under “Pipelines,” select “Service Connections.”</p>
<p>Click the “New Service Connection” button.</p>
<p>In the “Add new service connection” dialog, select “Azure Resource Manager” from the “Type” dropdown menu.</p>
<p>Give the service connection a name and click “Next.”</p>
<p>In the “Authorize Azure Resource Manager” dialog, select the Azure subscription you want to use and click “Authorize.”</p>
<p>After the authorization process is complete, click “Finish” to create the service connection.</p>
<p>You can now use this service connection in your Azure DevOps pipelines to access resources in your Azure subscription. For example, you could use it to deploy an application to an Azure web app, create or delete Azure resources, or run Azure Resource Manager templates.</p>
</section>
<section id="adding-infracost-code-in-pipeline" class="level2">
<h2 class="anchored" data-anchor-id="adding-infracost-code-in-pipeline">4.1.3 Adding Infracost code in pipeline</h2>
<p>Create a new pipeline, selecting</p>
<ol type="1">
<li><strong>Azure Repos Git</strong> when prompted in the <strong>“Connect”</strong> stage</li>
<li>Select the appropriate repo you wish to integrate Infracost with in the <strong>“Select”</strong> stage</li>
<li>Choose “Starter Pipeline” in the <strong>“Configure”</strong> stage</li>
<li>Replace the Starter Pipeline yaml with the following:</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The Azure Pipelines docs (https://docs.microsoft.com/en-us/azure/devops/pipelines/process/tasks) describe other options.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fl">6.</span><span class="co"> # Running on pull requests to `master` (or your default branch) is a good default.</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">7. pr</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">8.   - main</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fl">9.</span><span class="at"> </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">10. variables</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">11.   - name</span><span class="kw">:</span><span class="at"> TF_ROOT</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">12.     value</span><span class="kw">:</span><span class="at"> Terraform</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fl">13.</span><span class="co">   # If you use private modules you'll need this env variable to use </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fl">14.</span><span class="co">   # the same ssh-agent socket value across all steps. </span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">15.   - name</span><span class="kw">:</span><span class="at"> SSH_AUTH_SOCK</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">16.     value</span><span class="kw">:</span><span class="at"> /tmp/ssh_agent.sock</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fl">17.</span><span class="co">   # This instructs the CLI to send cost estimates to Infracost Cloud. Our SaaS product</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fl">18.</span><span class="co">   #   complements the open source CLI by giving teams advanced visibility and controls.</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fl">19.</span><span class="co">   #   The cost estimates are transmitted in JSON format and do not contain any cloud </span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fl">20.</span><span class="co">   #   credentials or secrets (see https://infracost.io/docs/faq/ for more information).</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">21.   - name</span><span class="kw">:</span><span class="at"> INFRACOST_ENABLE_CLOUD</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">22.     value</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fl">23.</span><span class="co">   # If you're using Terraform Cloud/Enterprise and have variables stored on there</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fl">24.</span><span class="co">   # you can specify the following to automatically retrieve the variables:</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fl">25.</span><span class="co">   # env:</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fl">26.</span><span class="co">   # - name: INFRACOST_TERRAFORM_CLOUD_TOKEN</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="fl">27.</span><span class="co">   #   value: $(tfcToken)</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="fl">28.</span><span class="co">   # - name: INFRACOST_TERRAFORM_CLOUD_HOST</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="fl">29.</span><span class="co">   #   value: app.terraform.io # Change this if you're using Terraform Enterprise</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="fl">30.</span><span class="at"> </span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="fu">31. jobs</span><span class="kw">:</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="fu">32.   - job</span><span class="kw">:</span><span class="at"> infracost</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="fu">33.     displayName</span><span class="kw">:</span><span class="at"> Run Infracost</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="fu">34.     pool</span><span class="kw">:</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="fu">35.       vmImage</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="fl">36.</span><span class="at"> </span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="fu">37.     steps</span><span class="kw">:</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="fl">38.</span><span class="co">       # If you use private modules, add a base 64 encoded secret</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="fl">39.</span><span class="co">       # called gitSshKeyBase64 with your private key, so Infracost can access</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="fl">40.</span><span class="co">       # private repositories (similar to how Terraform/Terragrunt does).</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="fl">41.</span><span class="co">       # - bash: |</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="fl">42.</span><span class="co">       #     ssh-agent -a $(SSH_AUTH_SOCK)</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="fl">43.</span><span class="co">       #     mkdir -p ~/.ssh</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="fl">44.</span><span class="co">       #     echo "$(echo $GIT_SSH_KEY_BASE_64 | base64 -d)" | tr -d '\r' | ssh-add -</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="fl">45.</span><span class="co">       #     # Update this to github.com, gitlab.com, bitbucket.org, ssh.dev.azure.com or your source control server's domain</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="fl">46.</span><span class="co">       #     ssh-keyscan ssh.dev.azure.com &gt;&gt; ~/.ssh/known_hosts</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="fl">47.</span><span class="co">       #   displayName: Add GIT_SSH_KEY</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="fl">48.</span><span class="co">       #   env:</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="fl">49.</span><span class="co">       #     GIT_SSH_KEY_BASE_64: $(gitSshKeyBase64)</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="fl">50.</span><span class="at"> </span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="fl">51.</span><span class="co">       # Install the Infracost CLI, see https://github.com/infracost/infracost-azure-devops#infracostsetup</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="fl">52.</span><span class="co">       # for other inputs such as version, and pricingApiEndpoint (for self-hosted users).</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="fu">53.       - task</span><span class="kw">:</span><span class="at"> InfracostSetup@1</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="fu">54.         displayName</span><span class="kw">:</span><span class="at"> Setup Infracost</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="fu">55.         inputs</span><span class="kw">:</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="fu">56.           apiKey</span><span class="kw">:</span><span class="at"> $(infracostApiKey)</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="fl">57.</span><span class="at"> </span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="fl">58.</span><span class="co">       # Clone the base branch of the pull request (e.g. main/master) into a temp directory.</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="fl">59.</span><span class="co">       # - bash: |</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="fl">60.</span><span class="co">       #     branch=$(System.PullRequest.TargetBranch)</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="fl">61.</span><span class="co">       #     branch=${branch#refs/heads/}</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="fl">62.</span><span class="co">       #     # Try adding the following to git clone if you're having issues cloning a private repo: --config http.extraheader="AUTHORIZATION: bearer $(System.AccessToken)"</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="fu">63.       - task</span><span class="kw">:</span><span class="at"> Bash@3</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="fu">64.         inputs</span><span class="kw">:</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="fu">65.               targetType</span><span class="kw">:</span><span class="at"> </span><span class="st">'inline'</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="fu">66.               script</span><span class="kw">:</span><span class="at"> </span><span class="st">'git clone @dev.azure.com/{orgname}/{project_name}/{repo_path}"&gt;https://$(PATToken)@dev.azure.com/{orgname}/{project_name}/{repo_path} --branch=main  /tmp/base'</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="fl">67.</span><span class="co">       #   displayName: Checkout base branch</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="fl">68.</span><span class="at"> </span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="fl">69.</span><span class="co">       # Generate an Infracost cost estimate baseline from the comparison branch, so that Infracost can compare the cost difference.</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="fu">70.       - bash</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a><span class="at">71.           infracost breakdown --path=$(TF_ROOT) \</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="at">72.                               --format=json \</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="at">73.                               --out-file=/tmp/infracost-base.json</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a><span class="fu">74.         displayName</span><span class="kw">:</span><span class="at"> Generate Infracost cost estimate baseline</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a><span class="fl">75.</span><span class="at"> </span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="fl">76.</span><span class="co">       # Generate an Infracost diff and save it to a JSON file.</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a><span class="fu">77.       - bash</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="at">78.           infracost diff --path=$(TF_ROOT) \</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a><span class="at">79.                          --format=json \</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a><span class="at">80.                          --compare-to=/tmp/infracost-base.json \</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a><span class="at">81.                          --out-file=/tmp/infracost.json</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a><span class="fu">82.         displayName</span><span class="kw">:</span><span class="at"> Generate Infracost diff</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a><span class="fl">83.</span><span class="at"> </span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a><span class="fl">84.</span><span class="co">       # Posts a comment to the PR using the 'update' behavior.</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="fl">85.</span><span class="co">       # This creates a single comment and updates it. The "quietest" option.</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="fl">86.</span><span class="co">       # The other valid behaviors are:</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a><span class="fl">87.</span><span class="co">       #   delete-and-new - Delete previous comments and create a new one.</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a><span class="fl">88.</span><span class="co">       #   new - Create a new cost estimate comment on every push.</span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="fl">89.</span><span class="co">       # See https://www.infracost.io/docs/features/cli_commands/#comment-on-pull-requests for other options.</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="fu">90.       - bash</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="at">91.            infracost comment azure-repos --path=/tmp/infracost.json \</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a><span class="at">92.                                          --azure-access-token=$(System.AccessToken) \</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a><span class="at">93.                                          --pull-request=$(System.PullRequest.PullRequestId) \</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a><span class="at">94.                                          --repo-url= '@dev.azure.com/kunaldas0966/test_project/_git/terracost-sample'"&gt;https://$(PATToken)@dev.azure.com/kunaldas0966/test_project/_git/terracost-sample' \</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a><span class="at">95.                                          --behavior=update</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a><span class="fu">96.         displayName</span><span class="kw">:</span><span class="at"> Post Infracost comment</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In the pipeline, variables add the below variables</p>
<p><img src="https://miro.medium.com/v2/resize:fit:643/1*N40nSKnlEH0lfQDLAvpEPQ.png" class="img-fluid"></p>
<p>To do the same,<br>
Sign into Azure DevOps and navigate to your project.</p>
<p>In the left menu, under “Pipelines,” select “Pipelines.”</p>
<p>Select the pipeline you want to add a variable to and click the “Edit” button.</p>
<p>In the pipeline editor, click the “Variables” tab.</p>
<p>Click the “Add” button to add a new variable.</p>
<p>In the “Add variable” dialog, enter a name and value for the variable. You can also specify whether the variable is secret and should be masked in the log output.</p>
<p>Click “Save” to add the variable to the pipeline.</p>
<p>You can now use the pipeline variable in your pipeline tasks by using the syntax $(variableName). You can also use pipeline variables to control the flow of your pipeline, by using conditions or branching.</p>
</section>
<section id="additional-settings" class="level2">
<h2 class="anchored" data-anchor-id="additional-settings">4.1.1 Additional settings</h2>
<p>Enable pull request build triggers. Without this, Azure Pipelines do not trigger builds with the pull request ID, thus comments cannot be posted by the integration.</p>
<p>From your Azure DevOps organization, click on your project &gt; Project Settings &gt; Repositories</p>
<p>Select the repository that your created the pipeline for in step 1</p>
<p>Select the Policies tab and under the Branch Policies select on your default branch (master or main)</p>
<p>Scroll to Build Validation and click + sign to add one if you don’t have one already</p>
<p>Set your ‘Build pipeline’ to the pipeline you created in step 1, leave ‘Path filter’ blank, set ‘Trigger’ to Automatic, and ‘Policy requirement’ to Optional (you can also use Required but we don’t recommend it).</p>
<p>Enable Azure Pipelines to post pull request comments</p>
<p>From your Azure DevOps organization, click on your project &gt; Project Settings &gt; Repositories &gt; your repository.</p>
<p>Click on the Securities tab, scroll down to Users and click on the ‘[project name] Build Service ([org name])’ user, and set the ‘Contribute to pull requests’ to Allow.</p>
<p>If you are using github instead of azure repo the code for the same is available at below link,</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=Infracost.infracost-tasks&amp;targetId=10277548-b72b-4200-99f2-565bf446c70d&amp;utm_source=vstsproduct&amp;utm_medium=ExtHubManageList">https://marketplace.visualstudio.com/items?itemName=Infracost.infracost-tasks&amp;targetId=10277548-b72b-4200-99f2-565bf446c70d&amp;utm_source=vstsproduct&amp;utm_medium=ExtHubManageList</a></p>
</section>
<section id="creating-a-pull-request" class="level2">
<h2 class="anchored" data-anchor-id="creating-a-pull-request">4.1.2 Creating a Pull Request</h2>
<p>Not you have to create a new branch and make some changes in the new branch to that the resource cost may increase or decrease,<br>
To create a new branch and do a pull request in an Azure Repo, you’ll need to follow these steps:</p>
<p>Navigate to the Azure Repos page in Azure DevOps.</p>
<p>Select the repository that you want to create the branch and pull request in.</p>
<p>On the repository page, click on the “Branches” tab.</p>
<p>Click on the “New branch” button.</p>
<p>Enter a name for the new branch and select the branch that you want to base the new branch on.</p>
<p>Click on the “Create branch” button to create the new branch.</p>
<p>Once the new branch has been created, you can switch to it and make the necessary changes. When you’re ready to submit the changes for review, you can follow the steps above to create a pull request.</p>
<p>Navigate to the Azure Repos page in Azure DevOps.</p>
<p>Select the repository that you want to create the pull request in.</p>
<p>On the repository page, click on the “Pull requests” tab.</p>
<p>Click on the “New pull request” button.</p>
<p>Select the source and target branches for the pull request. The source branch is the branch that contains the changes that you want to merge, and the target branch is the branch that you want to merge the changes into.</p>
<p>Review the changes that will be included in the pull request. You can use the “Files changed” tab to view the individual changes and make any necessary adjustments.</p>
<p>Add a title and optional description for the pull request.</p>
<p>If you want to request a review from specific people or teams, you can use the “Reviewers” field to add them.</p>
<p>When you’re ready to create the pull request, click on the “Create pull request” button.</p>
<p>After this you should see your pipeline starts running as the trigger is set as main pull request!</p>
</section>
<section id="viewing-the-dashboard" class="level2">
<h2 class="anchored" data-anchor-id="viewing-the-dashboard">4.1.3 Viewing the dashboard</h2>
<p>Log in to <a href="https://dashboard.infracost.io/">https://dashboard.infracost.io/</a> and select the repo ,</p>
<p><img src="https://miro.medium.com/v2/resize:fit:700/1*lr335paLDs5BXxIMUFiJdw.png" class="img-fluid"></p>
<p>You should be able to see similar kind of dashboard, there are many things to go through in the GUI,</p>
<p>The Infracost dashboard is a web-based tool that provides an overview of the cost of your infrastructure resources. It displays information about the total cost of your resources, as well as detailed information about each resource and its cost.</p>
<p>The dashboard is divided into several sections:</p>
<p>Overview: This section provides a summary of your infrastructure costs, including the total cost of your resources and the breakdown of costs by resource type.</p>
<p>Resources: This section lists all of the infrastructure resources in your project, along with their cost, resource type, and resource ID. You can use this section to view the cost of individual resources and identify opportunities for cost optimization.</p>
<p>Billing: This section provides information about your billing history, including the total amount billed, the billing period, and the date of the most recent bill.</p>
<p>Costs by resource type: This section displays a breakdown of your costs by resource type, showing you which types of resources are the most expensive.</p>
<p>Costs by tag: This section displays a breakdown of your costs by tag, allowing you to see which resources are associated with a particular tag and their costs.</p>
<p>Cost trends: This section displays a chart showing the trend in your infrastructure costs over time. You can use this chart to identify trends in your costs and identify opportunities for cost optimization.</p>
</section>
<section id="dashboard-use-cases" class="level2">
<h2 class="anchored" data-anchor-id="dashboard-use-cases">4.1.1 Dashboard use cases</h2>
<p>There are several things that you can do from the Infracost dashboard to manage and optimize the cost of your infrastructure resources:</p>
<p>View a summary of your infrastructure costs: The dashboard provides an overview of your total infrastructure costs, as well as a breakdown of costs by resource type. This can help you understand the overall cost of your infrastructure and identify areas where you might be able to save money.</p>
<p>View detailed information about individual resources: The dashboard provides detailed information about each infrastructure resource, including its cost, resource type, and resource ID. This can help you understand the cost of individual resources and identify opportunities for cost optimization.</p>
<p>View your billing history: The dashboard includes a section on billing that provides information about your total amount billed, the billing period, and the date of the most recent bill. This can help you understand your billing history and track changes in your costs over time.</p>
<p>View costs by resource type and tag: The dashboard provides a breakdown of costs by resource type and tag, which can help you understand which types of resources the most expensive and which resources are are associated with a particular tag.</p>
<p>View cost trends over time: The dashboard includes a chart showing the trend in your infrastructure costs over time. This can help you identify trends in your costs and identify opportunities for cost optimization.</p>
</section>
<section id="navigation" class="level2">
<h2 class="anchored" data-anchor-id="navigation">1. Navigation</h2>
</section>
<section id="pr-cost-difference" class="level2">
<h2 class="anchored" data-anchor-id="pr-cost-difference">5.1 PR cost difference</h2>
<p>Click on the repo and select the repository you are using in the Infracost dashboard,</p>
<p><img src="https://miro.medium.com/v2/resize:fit:700/1*PoTqM2wA9xHgEBiPttzqSw.png" class="img-fluid"></p>
<p>Here, you will see all the price difference before you choose to merge the PR.</p>
</section>
<section id="detailed-cost-estimation" class="level2">
<h2 class="anchored" data-anchor-id="detailed-cost-estimation">5.1 Detailed Cost estimation</h2>
<p>Click to see the full cost estimate and it will open the detailed cost estimates in a separate</p>
<p><img src="https://miro.medium.com/v2/resize:fit:700/1*mneFcpcqfz2on7hPsXwpjQ.png" class="img-fluid"></p>
<p>Here in the diff output tab you can see the difference that will occur if you merge the changes,</p>
<p><img src="https://miro.medium.com/v2/resize:fit:700/1*70chuQkrt0JR9XwO85e3BQ.png" class="img-fluid"></p>
<p>Click on the Table output to see all the involved cost,</p>
<p><img src="https://miro.medium.com/v2/resize:fit:700/1*GEAfTOXK8nr2XZyWioBklg.png" class="img-fluid"></p>
<p>Under each resource you can see detailed cost report of the individual items,</p>
<p><img src="https://miro.medium.com/v2/resize:fit:700/1*BUm6Xnn_x2r0dWh7dSvisA.png" class="img-fluid"></p>
<p>You may also choose to export the data in CSV format by clicking on export data.</p>
</section>
<section id="diagram" class="level2">
<h2 class="anchored" data-anchor-id="diagram">6. Diagram</h2>
<p>I have prepared a simple flow diagram that is very easy to understand, let’s go through each block one by one.</p>
<p><img src="https://miro.medium.com/v2/resize:fit:700/1*CjGEdkxtCmDqcuMmCvS8PA.png" class="img-fluid"></p>
</section>
<section id="new-branch" class="level2">
<h2 class="anchored" data-anchor-id="new-branch">6.1 New Branch</h2>
<p>Here basically we are creating a new branch so that, we can start making changes to existing infrastructure, creating a new branch in a version control system like Azure Repos allows you to work on a copy of your codebase and make changes to it without affecting the main branch (often called the “master” branch). This is useful when you want to make changes to your infrastructure, as it allows you to test and validate your changes before merging them into the main branch.</p>
<p>By creating a new branch, you can make changes to your infrastructure in a safe and isolated environment, without worrying about breaking anything in the main branch. This can help you avoid disruptions to your infrastructure and ensure that any changes you make are well-tested and ready for production.</p>
</section>
<section id="making-changes" class="level2">
<h2 class="anchored" data-anchor-id="making-changes">6.2 Making changes</h2>
<p>When you make changes to your codebase in a feature branch, you are working on a copy of the code that is separate from the main branch (often called the “master” branch). This allows you to make changes and test them without affecting the main branch, which can be useful when you are developing new features or making changes to your infrastructure. So you can just pull the code to your IDE like VS code and start making changes in the TF file, once done you can then push it to the dev/feature branch,</p>
</section>
<section id="pull-request" class="level2">
<h2 class="anchored" data-anchor-id="pull-request">6.3 Pull Request</h2>
<p>Create a pull request: When you’re ready to merge your changes into the main branch, you’ll need to create a pull request. This will allow other members of your team to review your changes and decide whether to merge them into the main branch.</p>
<p>Here once you create a pull request the pipeline will start running,</p>
<p>Once pipeline run finishes you can go to Infracost dashboard and view the cost estimation.</p>
</section>
<section id="release" class="level2">
<h2 class="anchored" data-anchor-id="release">6.4 Release</h2>
<p>If satisfied with the cost estimation then merge the changes and as soon as it gets merged to the main branch, it will trigger the terraform pipeline which will then create the desired resources.</p>
</section>
<section id="scope-for-improvement" class="level2">
<h2 class="anchored" data-anchor-id="scope-for-improvement">1. Scope for improvement</h2>
<p>The pipeline can be further automated to pass the Pull request automatically if certain conditions are met.<br>
suppose if cost increases/decreases &lt; 5% then the pipeline should read that and merge the code,<br>
It needs further research and collaboration.</p>
</section>
<section id="cost-of-implementation" class="level2">
<h2 class="anchored" data-anchor-id="cost-of-implementation">2. Cost of Implementation</h2>
<p>Infracost is an open-source tool though it has some pricing options, the free version provides plenty of options to get the job done, the features offered in the free versions are:</p>
<p>Open source</p>
<p>Get cost breakdowns and diffs</p>
<p>CI/CD integrations (GitHub, GitLab, Bitbucket, Azure DevOps…)</p>
<p>Works with Terraform Cloud &amp; Terragrunt</p>
<p>Use our hosted Cloud Pricing API or self-host</p>
<p>Community supported</p>
<p>For an annual fee of $30 some additionally functionalities can be availed,</p>
<p>In addition to Infracost Community:</p>
<p>Visibility across all changes, see pull requests that increase/decrease costs the most</p>
<p>Guardrails with custom messages/notifications/actions</p>
<p>Policies in pull requests (e.g.&nbsp;gp2 to gp3)</p>
<p>Custom price books and discounts</p>
<p>Jira integration</p>
<p>Custom reports</p>
<p>GitHub App integration with pull request status/metadata</p>
<p>Team management</p>
<p>SSO</p>
</section>
<section id="read-my-blogs" class="level2">
<h2 class="anchored" data-anchor-id="read-my-blogs">Read my blogs:</h2>
<p><a href="https://kunaldaskd.medium.com"><img src="https://i.imgur.com/TgYYM9w.png" class="img-fluid" alt="Medium"></a> <a href="https://dev.to/kunaldas"><img src="https://i.imgur.com/bp3qHWb.png" class="img-fluid" alt="DEV"></a> <a href="https://kunaldas.hashnode.dev"><img src="https://i.imgur.com/iwZwo2S.png" class="img-fluid" alt="Hashnode"></a></p>
</section>
<section id="connect-with-me" class="level2">
<h2 class="anchored" data-anchor-id="connect-with-me">Connect with Me:</h2>
<p><a href="https://twitter.com/kunald_official"><img src="https://i.imgur.com/VaorXDP.png" class="img-fluid" alt="Twitter"></a> <a href="https://linkedin.com/in/kunaldaskd"><img src="https://i.imgur.com/ktIHVxm.png" class="img-fluid" alt="LinkedIn"></a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/kunaldas\.dev");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="kunalworldwide/kunalworldwide.github.io" data-repo-id="R_kgDOLCIa1w" data-category="General" data-category-id="DIC_kwDOLCIa184ClGQR" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="preferred_color_scheme">
<input type="hidden" id="giscus-alt-theme" value="preferred_color_scheme">
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/kunalworldwide">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/kunald_official">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/kunaldaskd">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>